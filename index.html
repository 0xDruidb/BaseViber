
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BaseViber | On-Chain Intelligence</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script type="module">
        import { createPublicClient, http } from 'https://esm.sh/viem';
        import { base } from 'https://esm.sh/viem/chains';
        window.client = createPublicClient({ chain: base, transport: http('https://mainnet.base.org') });
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap');
        
        :root { --base-blue: #0052ff; --dark-bg: #020617; }
        
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background-color: var(--dark-bg); 
            color: white; 
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        /* Responsive Fixes */
        .container-custom { width: 100%; max-width: 1200px; margin: 0 auto; padding: 0 20px; }

        /* Solvior UI Elements */
        .glass-card { 
            background: rgba(255, 255, 255, 0.02); 
            border: 1px solid rgba(255, 255, 255, 0.08); 
            backdrop-filter: blur(20px); 
            border-radius: 2rem; 
            height: 100%;
        }

        input, textarea { 
            background: #ffffff !important; 
            color: #000000 !important; 
            border: 1px solid #e2e8f0 !important; 
            font-weight: 600;
            width: 100%;
            padding: 12px 16px;
            border-radius: 12px;
            outline: none;
        }

        /* ID Card Export Styling */
        #idCardExport { 
            width: 350px; 
            height: 220px; 
            background: linear-gradient(135deg, #0052ff 0%, #002a85 100%); 
            border-radius: 20px; 
            padding: 20px; 
            display: flex; 
            flex-direction: column; 
            justify-content: space-between; 
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .pfp-circle { width: 55px; height: 55px; border-radius: 50%; border: 2px solid white; object-fit: cover; background: #000; }

        /* Based Bubble Animation */
        @keyframes popUp { 
            0% { opacity: 0; transform: translateY(0) scale(0.5); } 
            20% { opacity: 1; } 
            100% { opacity: 0; transform: translateY(-120px) scale(1.2); } 
        }
        .based-bubble { 
            position: absolute; 
            pointer-events: none; 
            background: var(--base-blue); 
            color: white; 
            padding: 6px 14px; 
            border-radius: 50px; 
            font-weight: 800; 
            font-size: 12px;
            animation: popUp 1s ease-out forwards; 
            z-index: 100; 
        }
        .hidden { display: none; }
    </style>
</head>
<body>

    <nav class="container-custom py-8 flex justify-center md:justify-start">
        <div class="text-2xl font-black tracking-tighter italic">BASEVIBER<span class="text-blue-600">ðŸ”µ</span></div>
    </nav>

    <section class="container-custom text-center pt-10 pb-16">
        <h1 class="text-5xl md:text-7xl font-black tracking-tighter mb-6 bg-gradient-to-r from-white to-blue-400 bg-clip-text text-transparent">Scale Your <br>Based Alpha.</h1>
        <p class="text-gray-400 text-lg max-w-xl mx-auto font-light leading-relaxed">AI Sentiment & Identity Verification for the On-Chain generation.</p>
    </section>

    <main class="container-custom grid grid-cols-1 lg:grid-cols-2 gap-8 mb-20">
        
        <div class="glass-card p-8 relative overflow-hidden flex flex-col">
            <div id="bubble-container" class="absolute inset-0 pointer-events-none"></div>
            <h2 class="text-2xl font-black mb-1">Vibe Agent</h2>
            <p class="text-blue-500 text-[10px] font-bold uppercase tracking-widest mb-8">Sentiment Engine</p>

            <div class="flex p-1 bg-black/40 rounded-xl mb-6 border border-white/5 w-fit">
                <button id="tC" onclick="tab('coin')" class="px-5 py-2 rounded-lg text-[10px] font-bold uppercase bg-blue-600">Memecoin</button>
                <button id="tP" onclick="tab('post')" class="px-5 py-2 rounded-lg text-[10px] font-bold uppercase text-gray-500">Post</button>
            </div>

            <div id="vInputs" class="space-y-4">
                <div id="coinGroup" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <input id="mName" type="text" placeholder="Token Name">
                    <input id="mTick" type="text" placeholder="$Ticker">
                </div>
                <div id="postGroup" class="hidden">
                    <textarea id="pText" placeholder="Paste alpha..." class="h-28 resize-none"></textarea>
                </div>
                <button onclick="analyzeVibe()" id="vBtn" class="w-full bg-blue-600 py-4 rounded-xl font-black uppercase text-xs tracking-widest hover:brightness-110 active:scale-95 transition-all mt-4">Analyze Vibe</button>
            </div>

            <div id="vResult" class="hidden text-center py-10">
                <div id="vScore" class="text-8xl font-black italic text-blue-600 leading-none">0</div>
                <p id="vVerdict" class="text-gray-400 italic text-sm mt-6"></p>
                <button onclick="location.reload()" class="mt-8 text-[10px] font-bold text-gray-600 uppercase border-b border-gray-800">New Scan</button>
            </div>
        </div>

        <div class="glass-card p-8">
            <h2 class="text-2xl font-black mb-1">Identity Pass</h2>
            <p class="text-blue-500 text-[10px] font-bold uppercase tracking-widest mb-8">Passport to Base</p>

            <div id="idForm" class="space-y-4">
                <div class="flex items-center gap-4 bg-white/5 p-4 rounded-xl border border-white/10">
                    <img id="pfpPreview" src="https://via.placeholder.com/55" class="pfp-circle">
                    <input type="file" id="photoIn" accept="image/*" class="!bg-transparent !border-none text-[10px] file:bg-blue-600 file:border-none file:text-white file:rounded-lg file:px-2 file:py-1">
                </div>
                <input id="userName" type="text" placeholder="Display Name">
                <input id="baseUser" type="text" placeholder="BaseApp Username (e.g. @anon)">
                <input id="wAddr" type="text" placeholder="0x... Wallet Address">
                <button onclick="generateID()" id="gBtn" class="w-full bg-white text-black py-4 rounded-xl font-black uppercase text-xs tracking-widest hover:bg-blue-600 hover:text-white transition">Generate ID</button>
            </div>

            <div id="idPreviewArea" class="hidden flex flex-col items-center">
                <div id="idCardExport">
                    <div class="flex justify-between items-start">
                        <div class="flex items-center gap-3">
                            <img id="finalPfp" src="" class="pfp-circle">
                            <div>
                                <div id="finalName" class="font-black text-sm uppercase leading-none">ANON</div>
                                <div id="finalBase" class="text-[10px] text-blue-200 font-bold mt-1">@username</div>
                                <div id="finalAddr" class="text-[8px] opacity-60 font-mono">0x00...00</div>
                            </div>
                        </div>
                        <div class="text-[8px] font-black italic opacity-40">BASEVIBER</div>
                    </div>
                    <div class="grid grid-cols-2 gap-3 mt-4">
                        <div class="bg-white/10 p-2 rounded-lg border border-white/5 text-center">
                            <div id="finalTx" class="text-lg font-black">0</div>
                            <div class="text-[7px] uppercase opacity-60">Transactions</div>
                        </div>
                        <div class="bg-white/10 p-2 rounded-lg border border-white/5 text-center">
                            <div id="finalScore" class="text-lg font-black text-blue-300">0</div>
                            <div class="text-[7px] uppercase opacity-60">Based Score</div>
                        </div>
                    </div>
                    <div class="flex justify-between items-end mt-4">
                        <div class="text-[8px] font-bold uppercase px-3 py-1 bg-white/20 rounded-full" id="finalRank">CITIZEN</div>
                        <div class="text-[7px] opacity-40 font-bold uppercase tracking-tighter">Chain Verified &copy; 2026</div>
                    </div>
                </div>
                <button onclick="downloadID()" class="mt-6 text-blue-400 font-bold uppercase text-[10px] border-b border-blue-900 pb-1">Download Identity Pass</button>
            </div>
        </div>
    </main>

    <footer class="container-custom py-16 text-center border-t border-white/5">
        <p class="text-[10px] font-bold text-gray-500 uppercase tracking-[0.3em]">Created by <a href="https://x.com/0xdruid" class="text-blue-500 hover:underline">@0xdruid</a></p>
    </footer>

    <script>
        // TAB LOGIC
        function tab(t) {
            const isC = t === 'coin';
            document.getElementById('tC').className = `px-5 py-2 rounded-lg text-[10px] font-bold uppercase ${isC ? 'bg-blue-600 text-white' : 'text-gray-500'}`;
            document.getElementById('tP').className = `px-5 py-2 rounded-lg text-[10px] font-bold uppercase ${!isC ? 'bg-blue-600 text-white' : 'text-gray-500'}`;
            document.getElementById('coinGroup').classList.toggle('hidden', !isC);
            document.getElementById('postGroup').classList.toggle('hidden', isC);
        }

        // VIBE ENGINE
        function analyzeVibe() {
            const isC = !document.getElementById('coinGroup').classList.contains('hidden');
            const n = document.getElementById('mName').value.trim();
            const t = document.getElementById('mTick').value.trim();
            const p = document.getElementById('pText').value.trim();

            if ((isC && (!n || !t)) || (!isC && !p)) {
                alert("Don't be dumb... That shit is empty.");
                return;
            }

            const id = isC ? `v_${n}_${t}` : `v_${p.substring(0,10)}`;
            if(localStorage.getItem(id)) { alert("WEIRDO... ALREADY TRIED THAT ðŸ‘€ðŸ”µ"); return; }
            localStorage.setItem(id, "true");

            document.getElementById('vBtn').innerText = "VIBE CHECKING...";
            
            setTimeout(() => {
                document.getElementById('vInputs').classList.add('hidden');
                document.getElementById('vResult').classList.remove('hidden');
                document.getElementById('vScore').innerText = Math.floor(Math.random() * 20) + 80;
                document.getElementById('vVerdict').innerText = "L2 ALPHA CONFIRMED. YOU ARE COOKING.";
                for(let i=0; i<15; i++) setTimeout(spawnBubble, i * 80);
            }, 1500);
        }

        function spawnBubble() {
            const b = document.createElement('div');
            b.className = 'based-bubble'; b.innerText = 'BASED ðŸ”µ';
            b.style.left = (Math.random() * 70 + 15) + '%';
            b.style.top = '70%';
            document.getElementById('bubble-container').appendChild(b);
            setTimeout(() => b.remove(), 1000);
        }

        // ID LOGIC
        document.getElementById('photoIn').onchange = (e) => {
            const [file] = e.target.files;
            if (file) {
                const url = URL.createObjectURL(file);
                document.getElementById('pfpPreview').src = url;
                document.getElementById('finalPfp').src = url;
            }
        };

        async function generateID() {
            const addr = document.getElementById('wAddr').value.trim();
            const name = document.getElementById('userName').value.trim() || "BASED ANON";
            const buser = document.getElementById('baseUser').value.trim() || "@based";
            
            if(!addr.startsWith('0x') || addr.length !== 42) { alert("Invalid Address."); return; }

            const gBtn = document.getElementById('gBtn');
            gBtn.innerText = "QUERYING L2...";

            try {
                const txs = await window.client.getTransactionCount({ address: addr });
                document.getElementById('finalName').innerText = name.toUpperCase();
                document.getElementById('finalBase').innerText = buser;
                document.getElementById('finalAddr').innerText = addr.substring(0,6) + "..." + addr.substring(38);
                document.getElementById('finalTx').innerText = txs;
                document.getElementById('finalScore').innerText = Math.min(txs + 15, 99);
                document.getElementById('finalRank').innerText = txs > 100 ? "GIGA BASED" : "CITIZEN";

                document.getElementById('idForm').classList.add('hidden');
                document.getElementById('idPreviewArea').classList.remove('hidden');
            } catch (err) {
                alert("Blockchain connection failed.");
                gBtn.innerText = "Generate ID";
            }
        }

        function downloadID() {
            html2canvas(document.getElementById('idCardExport'), { backgroundColor: null, scale: 2 }).then(canvas => {
                const a = document.createElement('a');
                a.download = 'Based_Passport.png';
                a.href = canvas.toDataURL("image/png");
                a.click();
            });
        }
    </script>
</body>
</html>
